<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Test - Scorekeeper</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f0f0f0; text-align: center; }
        button { padding: 15px 30px; font-size: 18px; margin: 10px; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer; }
        button:hover { background: #218838; }
        #status { font-size: 24px; color: green; margin: 20px; }
    </style>
<script type="module">
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js';
  import { getDatabase, ref, set } from 'https://www.gstatic.com/firebasejs/10.14.1/firebase-database.js';

  const firebaseConfig = {
    apiKey: "AIzaSyAp3teE0EOa7iF69EIVNll7FSaFMRKJzEE",
    authDomain: "dartball-4f29e.firebaseapp.com",
    databaseURL: "https://dartball-4f29e-default-rtdb.firebaseio.com",
    projectId: "dartball-4f29e",
    storageBucket: "dartball-4f29e.firebasestorage.app",
    messagingSenderId: "363609573700",
    appId: "1:363609573700:web:2dd01042ada7a080feef11"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  // ← THIS WAS WRONG BEFORE — fixed now
  const testRef = ref(db, 'testConnection');   // ← simple root-level node

  function pushTestScore(score) {
    set(testRef, { score: score, timestamp: Date.now(), message: 'Connection working!' })
      .then(() => {
        document.getElementById('status').textContent = `Pushed ${score} — check phone!`;
        document.getElementById('status').style.color = 'green';
      })
      .catch(err => {
        document.getElementById('status').textContent = `Error: ${err.message}`;
        document.getElementById('status').style.color = 'red';
      });
  }

  window.onload = () => {
    document.getElementById('push1').onclick = () => pushTestScore(11);
    document.getElementById('push2').onclick = () => pushTestScore(22);
    document.getElementById('push3').onclick = () => pushTestScore(0);
  };
</script>
</head>
<body>
    <h1>Firebase Test - Scorekeeper</h1>
    <p>Click a button to push a test score to Firebase. Watch the viewer page update live!</p>
    <button id="push1">Push Score 3</button>
    <button id="push2">Push Score 7</button>
    <button id="push3">Reset to 0</button>
    <div id="status">Ready to test...</div>
    <p><a href="test_viewer.html">Open Test Viewer (for phones)</a></p>
</body>
</html>
